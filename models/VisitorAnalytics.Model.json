{"version":"2.0","models":[{"Key":"13","Name":"VisitorAnalytics","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"Output","type":"actionoutput","id":"547aaecf-d6c5-4ee5-db42-85e747811b94","position":{"left":1284,"top":227},"surface":"GetVisitorCount","connections":{"inputs":[{"source":"489919e6-c55b-4d48-afdb-e6b5998da6d0:output:out","target":"547aaecf-d6c5-4ee5-db42-85e747811b94:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"efa302a2-2208-4086-b131-119072e3e939","position":{"left":35,"top":201},"surface":"VisitorArrived","connections":{"inputs":[],"outputs":[{"source":"efa302a2-2208-4086-b131-119072e3e939:output:location","target":"e86307c2-0b2a-4cb1-dcdb-f7e3997ea623:input:building"},{"source":"efa302a2-2208-4086-b131-119072e3e939:output:time","target":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:input:input1"},{"source":"efa302a2-2208-4086-b131-119072e3e939:output:count","target":"a317430e-894b-42b3-a47d-79033454b40c:input:value"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"count","type":"","label":"count","description":"","documentation":""},{"id":"location","type":"","label":"location","description":"","documentation":""},{"id":"time","type":"","label":"time","description":"","documentation":""}],"actionName":"VisitorArrived","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Now","type":"objectaction:System:Now","id":"77f4fe26-7386-4f89-8d92-86c02adef026","position":{"left":553,"top":494},"surface":"VisitorArrived","connections":{"inputs":[{"source":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:output:false","target":"77f4fe26-7386-4f89-8d92-86c02adef026:input:trigger"}],"outputs":[{"source":"77f4fe26-7386-4f89-8d92-86c02adef026:output:output","target":"a317430e-894b-42b3-a47d-79033454b40c:input:timestamp"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":""}]},{"title":"Add Point","type":"timeseriesaddpoint","id":"a317430e-894b-42b3-a47d-79033454b40c","position":{"left":803,"top":182},"surface":"VisitorArrived","connections":{"inputs":[{"source":"e86307c2-0b2a-4cb1-dcdb-f7e3997ea623:output:output","target":"a317430e-894b-42b3-a47d-79033454b40c:input:trend"},{"source":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:output:true","target":"a317430e-894b-42b3-a47d-79033454b40c:input:timestamp"},{"source":"77f4fe26-7386-4f89-8d92-86c02adef026:output:output","target":"a317430e-894b-42b3-a47d-79033454b40c:input:timestamp"},{"source":"efa302a2-2208-4086-b131-119072e3e939:output:count","target":"a317430e-894b-42b3-a47d-79033454b40c:input:value"}],"outputs":[]},"inputValues":[{"id":"trend","type":"","label":"Trend Name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"value","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"int","disablelog":""},{"id":"timestamp","type":"","label":"Timestamp","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""}]},{"title":"Query Points","type":"timeseriesquerypoints","id":"9c560722-fe3a-403d-8e26-f76bf7b70ed0","position":{"left":723,"top":196},"surface":"GetVisitorCount","connections":{"inputs":[{"source":"54dac580-f915-4a0c-f594-d2c405fb6e2b:output:output","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:trend"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:bucket","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:bucket"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:start","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:from"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:end","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:to"}],"outputs":[{"source":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:output:output","target":"489919e6-c55b-4d48-afdb-e6b5998da6d0:input:in"}]},"inputValues":[{"id":"trend","type":"","label":"Trend Name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"bucket","type":"","label":"Bucket Type","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"aggregation","type":"","label":"Aggregation Type","value":"sum","description":"","documentation":"","transformation":"","disablelog":""},{"id":"from","type":"","label":"From","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"to","type":"","label":"To","value":"","description":"","documentation":"","transformation":"isodatetime","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"limit","type":"","label":"Limit","value":"100","description":"","documentation":"","transformation":"","disablelog":""},{"id":"offset","type":"","label":"Offset","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"descending","type":"","label":"Descending","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""}],"timeout":5000},{"title":"Template","type":"template","id":"e86307c2-0b2a-4cb1-dcdb-f7e3997ea623","position":{"left":262,"top":26},"surface":"VisitorArrived","connections":{"inputs":[{"source":"efa302a2-2208-4086-b131-119072e3e939:output:location","target":"e86307c2-0b2a-4cb1-dcdb-f7e3997ea623:input:building"}],"outputs":[{"source":"e86307c2-0b2a-4cb1-dcdb-f7e3997ea623:output:output","target":"a317430e-894b-42b3-a47d-79033454b40c:input:trend"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"building","type":"","label":"building","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":""}],"template":"/visitors/#{building}"},{"title":"Action","type":"actionstart","id":"c6689dbd-f235-45a0-d6cf-d1b672fd7441","position":{"left":101,"top":215},"surface":"GetVisitorCount","connections":{"inputs":[],"outputs":[{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:bucket","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:bucket"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:start","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:from"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:end","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:to"},{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:location","target":"54dac580-f915-4a0c-f594-d2c405fb6e2b:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"location","type":"","label":"location","description":"","documentation":""},{"id":"bucket","type":"","label":"bucket","description":"","documentation":""},{"id":"start","type":"","label":"start","description":"","documentation":""},{"id":"end","type":"","label":"end","description":"","documentation":""}],"actionName":"GetVisitorCount","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"ES6Javascript","type":"es6javascript","id":"489919e6-c55b-4d48-afdb-e6b5998da6d0","position":{"left":989,"top":82},"surface":"GetVisitorCount","connections":{"inputs":[{"source":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:output:output","target":"489919e6-c55b-4d48-afdb-e6b5998da6d0:input:in"}],"outputs":[{"source":"489919e6-c55b-4d48-afdb-e6b5998da6d0:output:out","target":"547aaecf-d6c5-4ee5-db42-85e747811b94:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"in","type":"","label":"in","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"out","type":"","label":"out","description":"","documentation":""}],"description":"","code":"runtime.done({out:runtime.inputs().in});","timeoutMilliseconds":5000},{"title":"Exists","type":"exists","id":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e","position":{"left":267,"top":371},"surface":"VisitorArrived","connections":{"inputs":[{"source":"efa302a2-2208-4086-b131-119072e3e939:output:time","target":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:input:input1"}],"outputs":[{"source":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:output:true","target":"a317430e-894b-42b3-a47d-79033454b40c:input:timestamp"},{"source":"35f5a6e5-7ac0-444d-b8c2-6d7925f7c26e:output:false","target":"77f4fe26-7386-4f89-8d92-86c02adef026:input:trigger"}]},"inputValues":[{"id":"input1","type":"","label":"Input 1","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"true","type":"","label":"True","description":"","documentation":""},{"id":"false","type":"","label":"False","description":"","documentation":""}]},{"title":"Template","type":"template","id":"54dac580-f915-4a0c-f594-d2c405fb6e2b","position":{"left":389,"top":28},"surface":"GetVisitorCount","connections":{"inputs":[{"source":"c6689dbd-f235-45a0-d6cf-d1b672fd7441:output:location","target":"54dac580-f915-4a0c-f594-d2c405fb6e2b:input:trigger"}],"outputs":[{"source":"54dac580-f915-4a0c-f594-d2c405fb6e2b:output:output","target":"9c560722-fe3a-403d-8e26-f76bf7b70ed0:input:trend"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"building","type":"","label":"building","value":"Building1","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output Text","description":"","documentation":""}],"template":"/visitors/#{building}"}],"position":{"top":0,"left":0}},"sources":[{"name":"VisitorArrived","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["count","location","time"]},{"name":"GetVisitorCount","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["location","bucket","start","end"]}],"actions":[{"name":"VisitorArrived","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["count","location","time"]},{"name":"GetVisitorCount","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["location","bucket","start","end"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"title\":\"Visitor Analytics\",\"description\":\"Provide visitor checkin and arrival data\",\"tags\":[\"visitors\"],\"capabilities\":[]}","ApiRoutes":[{"Key":"309","MapKey":"13","Route":"arrival/{location}","Method":"POST","BodyFormat":"JSON","IsActive":"0","Action":"VisitorArrived","NoAuth":"0"}],"JSModules":[],"ModelCollections":[]}]}